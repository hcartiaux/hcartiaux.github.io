<!DOCTYPE html>
<html><head lang="en">
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Podman cheat sheet - My sysadmin notes</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="This is a cheat sheet of podman useful information and commands." />
	<meta property="og:image" content=""/>
	<meta property="og:url" content="https://hcartiaux.github.io/posts/2024-04-23-podman_cheat_sheet/">
  <meta property="og:site_name" content="My sysadmin notes">
  <meta property="og:title" content="Podman cheat sheet">
  <meta property="og:description" content="This is a cheat sheet of podman useful information and commands.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-20T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-04-20T00:00:00+00:00">
    <meta property="article:tag" content="Linux">
    <meta property="article:tag" content="Sysadmin">
    <meta property="article:tag" content="Containers">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Podman cheat sheet">
  <meta name="twitter:description" content="This is a cheat sheet of podman useful information and commands.">
<script src="https://hcartiaux.github.io/js/feather.min.js"></script>
	
	
        <link href="https://hcartiaux.github.io/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="https://hcartiaux.github.io/css/main.6088c83166692b4a79abc75becec2939f1634cca87b98ebc21911ad3e6892fb3.css" />
		<link id="darkModeStyle" rel="stylesheet" type="text/css" href="https://hcartiaux.github.io/css/dark.79f0c18dec9d57aff71529bed6b0a1f8289b4d7ab5f4977b7812cb344d58528d.css"  />
	

	
	

	
	
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css">
		<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js"></script>
		<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
		
		
		<script>
			document.addEventListener("DOMContentLoaded", function() {
					renderMathInElement(document.body, {
							delimiters: [
									{left: "$$", right: "$$", display: true},
									{left: "$", right: "$", display: false}
							]
					});
			});
			</script>
	
	
	
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="https://hcartiaux.github.io/">My sysadmin notes</a>
	</div>
	<nav>
		
		<a href="/">Home</a>
		
		<a href="/posts">All posts</a>
		
		<a href="/tags">Tags</a>
		
		| <span id="dark-mode-toggle" onclick="toggleTheme()"></span>
		<script src="https://hcartiaux.github.io/js/themetoggle.js"></script>
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">Podman cheat sheet</h1>
			<div class="meta">Posted on Apr 20, 2024</div>
		</div>
		

		
		<nav id="TableOfContents">
  <ul>
    <li><a href="#install-podman">Install podman</a></li>
    <li><a href="#image-management">Image management</a></li>
    <li><a href="#get-information-about-running-containers">Get information about running containers</a></li>
    <li><a href="#control-a-container">Control a container</a></li>
    <li><a href="#configuration-generation">Configuration generation</a>
      <ul>
        <li><a href="#kube-definition-file">Kube definition file</a></li>
        <li><a href="#systemd-units-deprecated-since-podman-44">Systemd units (<em>deprecated since podman 4.4</em>)</a></li>
        <li><a href="#quadlet">Quadlet</a></li>
      </ul>
    </li>
    <li><a href="#external-resources">External Resources</a></li>
  </ul>
</nav>

		<section class="body">
			<p>This is a cheat sheet of podman useful information and commands.</p>
<p>Podman is feature equivalent with docker, with the advantage of not requiring root privileges and a daemon running as root.
It can be used alongside with <code>buildah</code> to build container images, and <code>skopeo</code> to manage container images in a registry.</p>
<h2 id="install-podman">Install podman</h2>
<ul>
<li>Install the package: <code>apt install podman</code></li>
<li>Allow for unqualified search in the docker.io and quay.io repositories: <code>echo 'unqualified-search-registries=[&quot;docker.io&quot;, &quot;quay.io&quot;]' &gt; $HOME/.config/containers/registries.conf</code></li>
<li>Enable the auto-update timer: <code>systemctl [--user] enable --now podman-auto-update.timer</code></li>
</ul>
<h2 id="image-management">Image management</h2>
<ul>
<li>List pulled images: <code>podman image ls</code></li>
<li>Show the history of an image: <code>podman image history &lt;image name&gt;</code></li>
<li>Retrieve or update an image: <code>podman image pull &lt;image name&gt;</code>
Do not forget to restart the containers using this image to use the updated version.</li>
<li>Retrieve a specific image version: <code>podman pull &lt;image name&gt;:&lt;version|latest&gt;</code></li>
</ul>
<h2 id="get-information-about-running-containers">Get information about running containers</h2>
<ul>
<li>List running containers: <code>podman ps</code></li>
<li>List all containers: <code>podman ps -a</code></li>
<li>Sort all containers by size: <code>podman ps --size --sort size</code></li>
<li>Sort all containers by creation time: <code>podman ps --sort created</code></li>
<li>List with a customized format: <code>podman ps --all --format &quot;{{.Names}} {{.Ports}} {{.Mounts}} {{.Status}}&quot;</code></li>
<li>Live resource information by container: <code>podman stats</code></li>
</ul>
<h2 id="control-a-container">Control a container</h2>
<ul>
<li>Create a new container: <code>podman run -dt &lt;image name&gt;</code></li>
<li>Create a new container and map a directory: <code>-v &lt;host directory&gt;:&lt;container mount point&gt;</code></li>
<li>Create a new container and map a network port: <code>-p &lt;host port&gt;:&lt;container port&gt;</code></li>
<li>Enable Auto-update: <code>--label io.containers.autoupdate=registry</code></li>
<li>Checking for updates: <code>podman auto-update</code></li>
<li>Copy a file to a container: <code>podman cp &lt;src&gt; &lt;dest&gt;</code></li>
<li><code>podman [restart,start,stop,pause,unpause] &lt;CONTAINER ID&gt;</code></li>
<li>Remove a container: <code>podman rm &lt;CONTAINER ID&gt;</code></li>
</ul>
<h2 id="configuration-generation">Configuration generation</h2>
<h3 id="kube-definition-file">Kube definition file</h3>
<ul>
<li>Generate a kube file: <code>podman generate kube &lt;CONTAINER ID&gt; &gt; &lt;filename&gt;.yaml</code></li>
<li>Import a kube file: <code>podman play kube &lt;filename&gt;.yaml</code></li>
</ul>
<h3 id="systemd-units-deprecated-since-podman-44">Systemd units (<em>deprecated since podman 4.4</em>)</h3>
<ul>
<li>Pre-requisites: <code>systemctl --user enable podman-restart.service</code></li>
<li>Generate a systemd service unit: <code>podman generate systemd --new &lt;CONTAINER ID&gt; &gt; ~/.config/systemd/user/&lt;CONTAINER NAME&gt;.service</code></li>
<li>Reload systemd: <code>systemctl --user daemon-reload</code></li>
<li>Enable the container to start at boot: <code>systemctl --user enable &lt;CONTAINER NAME&gt;.service</code></li>
</ul>
<h3 id="quadlet">Quadlet</h3>
<p>Configuration directories:</p>
<ul>
<li><code>/usr/share/containers/systemd/</code></li>
<li><code>/etc/containers/systemd/</code></li>
<li><code>~/.config/containers/systemd</code> (<em>rootless</em>)</li>
</ul>
<p>Create a container file, in example in <code>.config/containers/systemd/httpd.container</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span>[Unit]
</span></span><span style="display:flex;"><span>Description<span style="color:#719e07">=</span>HTTPD server
</span></span><span style="display:flex;"><span>After<span style="color:#719e07">=</span>local<span style="color:#719e07">-</span>fs<span style="color:#719e07">.</span>target
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#cb4b16">Container</span>]
</span></span><span style="display:flex;"><span><span style="color:#cb4b16">Image</span><span style="color:#719e07">=</span>docker<span style="color:#719e07">.</span>io<span style="color:#719e07">/</span>library<span style="color:#719e07">/</span>httpd:latest
</span></span><span style="display:flex;"><span><span style="color:#586e75">#Exec=sleep 1000</span>
</span></span><span style="display:flex;"><span>AutoUpdate<span style="color:#719e07">=</span>registry
</span></span><span style="display:flex;"><span>PublishPort<span style="color:#719e07">=</span><span style="color:#2aa198">8080</span>:<span style="color:#2aa198">80</span> <span style="color:#586e75"># Port mapping</span>
</span></span><span style="display:flex;"><span>Volume<span style="color:#719e07">=%</span>h<span style="color:#719e07">/</span>public:<span style="color:#719e07">/</span><span style="color:#719e07">var</span><span style="color:#719e07">/</span>www<span style="color:#719e07">/</span> <span style="color:#586e75"># %h is mapped to the user home dir</span>
</span></span><span style="display:flex;"><span><span style="color:#cb4b16">Environment</span><span style="color:#719e07">=</span>ENV<span style="color:#719e07">=</span>prod <span style="color:#586e75"># Environment variable</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[Install]
</span></span><span style="display:flex;"><span><span style="color:#586e75"># Start by default on boot</span>
</span></span><span style="display:flex;"><span>WantedBy<span style="color:#719e07">=</span>multi<span style="color:#719e07">-</span>user<span style="color:#719e07">.</span>target default<span style="color:#719e07">.</span>target
</span></span></code></pre></div><ul>
<li>Reload and scan for local changes: <code>systemctl --user daemon-reload</code></li>
<li>Show the generated service unit: <code>systemctl --user cat httpd</code></li>
<li>Start the container: <code>systemctl --user start httpd</code></li>
</ul>
<h2 id="external-resources">External Resources</h2>
<ul>
<li><a href="https://linuxhandbook.com/podman-add-delete-containers/">https://linuxhandbook.com/podman-add-delete-containers/</a></li>
<li><a href="https://www.redhat.com/sysadmin/create-containers-podman-quickly">https://www.redhat.com/sysadmin/create-containers-podman-quickly</a></li>
<li><a href="https://www.redhat.com/sysadmin/container-information-podman">https://www.redhat.com/sysadmin/container-information-podman</a></li>
<li><a href="https://www.redhat.com/sysadmin/update-container-images-podman">https://www.redhat.com/sysadmin/update-container-images-podman</a></li>
<li><a href="https://developers.redhat.com/blog/2019/01/15/podman-managing-containers-pods">https://developers.redhat.com/blog/2019/01/15/podman-managing-containers-pods</a></li>
<li><a href="https://www.redhat.com/sysadmin/podman-auto-updates-rollbacks">https://www.redhat.com/sysadmin/podman-auto-updates-rollbacks</a></li>
<li><a href="https://linuxhandbook.com/autostart-podman-containers/">https://linuxhandbook.com/autostart-podman-containers/</a></li>
<li><a href="https://mo8it.com/blog/quadlet/">https://mo8it.com/blog/quadlet/</a></li>
<li><a href="https://linuxconfig.org/how-to-run-podman-containers-under-systemd-with-quadlet">https://linuxconfig.org/how-to-run-podman-containers-under-systemd-with-quadlet</a></li>
</ul>
		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/linux">linux</a></li>
					
					<li><a href="/tags/sysadmin">sysadmin</a></li>
					
					<li><a href="/tags/containers">containers</a></li>
					
				</ul>
			</nav>
			
			
		</div>
		</article>
</main>
<footer>
  <div style="display:flex"><a class="soc" href="https://github.com/hcartiaux" rel="me" title="GitHub"><i data-feather="github"></i></a>
    <a class="border"></a><a class="soc" href="https://www.linkedin.com/in/hyacinthecartiaux/" rel="me" title="Linkedin"><i data-feather="linkedin"></i></a>
    <a class="border"></a></div>
  <div class="footer-info">
    2024  CC BY-SA 4.0 |  <a
      href="https://github.com/hcartiaux/hugo-theme-archie-solarized">Archie Solarized Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
  </div>
</footer>


  


<script>
  feather.replace()
</script></div>
    </body>
</html>
